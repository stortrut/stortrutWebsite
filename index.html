<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Huvudsida</title>

    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/movie-styles.css">

    <script src="/scripts/text-resizer.js"></script>
</head>

<body>
    
    <div id="top-bar"></div>
    <script src="/scripts/scriptforall.js"></script>

    <p>The great hero @Odo Orgulas once fought alongside @Hektor Kostos in the old wars.</p>


    <h1>
        Filmrecensioner
    </h1>


    <div class="sort-holder-wrapper">
    <!--Sort holder-->
    <div class="sort-holder">
        <select id="sort-select">
            <option value="title">Titel</option>
            <option value="release">Release</option>
            <option value="rating">Betyg</option>
            <option value="seen-date">Datum Sedd</option>
        </select>

        <button id="sort-direction-toggle" style="margin-left: 8px;">Asc â†‘</button>

        <div id="reviewer-filters">
            <input type="checkbox" id="Alvin" value="Alvin">
            <label for="Alvin">Alvin</label>
        
            <input type="checkbox" id="Diaa" value="Diaa">
            <label for="Diaa">Diaa</label>

            <input type="checkbox" id="Holger" value="Holger">
            <label for="Holger">Holger</label>
        
            <input type="checkbox" id="Carl" value="Carl">
            <label for="Carl">Carl</label>
        </div>
    </div>
        <div id="movie-count-box">
            <div class="label">Filmer sedda:</div>
            <div class="number" id="movie-count-number">0</div>
        </div>
    </div>


<hr>
<br>


    <!-- This is where movies go -->
    <div id="reviews"></div>
    <script src="/scripts/movie-generator.js"></script>



<script>
fetch('/articles/pages.json')
  .then(res => res.json())
  .then(pages => {
    // Make a quick lookup map for faster matching
    const pageMap = {};
    for (const page of pages) {
      pageMap[page.name.toLowerCase()] = page.url;
    }

    // Replace @Mentions in the entire document body
    document.body.innerHTML = document.body.innerHTML.replace(
      /@([A-Za-z0-9_\-\s]+)/g,
      (match, name) => {
        const key = name.trim().toLowerCase();
        if (pageMap[key]) {
          return `<a href="${pageMap[key]}">${name.trim()}</a>`;
        }
        return match; // leave as-is if not found
      }
    );
  })
  .catch(err => console.error('Error loading pages.json', err));
</script>



</body>
</html>