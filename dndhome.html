<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D&D Horizontal Timeline</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: #f0f0f0;
      overflow: hidden;
    }

    h1 {
      text-align: center;
      margin: 20px 0;
    }

    #timeline-container {
      position: relative;
      height: 300px;
      overflow: hidden;
      border-top: 2px solid #444;
      border-bottom: 2px solid #444;
      margin: 20px;
      cursor: grab;
    }

    #timeline {
      position: absolute;
      display: flex;
      align-items: center;
      height: 100%;
      transition: transform 0.1s;
      transform-origin: left center;
    }

    .event {
      position: relative;
      background: #333;
      border: 1px solid #666;
      border-radius: 8px;
      padding: 10px;
      margin: 10px;
      min-width: 200px;
      max-width: 300px;
      flex-shrink: 0;
    }

    .event h3 {
      margin: 0;
      font-size: 16px;
      color: #4caf50;
    }

    .event p {
      font-size: 14px;
      margin-top: 5px;
    }

    .event::before {
      content: attr(data-date);
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      padding: 3px 6px;
      border-radius: 4px;
      font-size: 13px;
      color: #ccc;
    }
  </style>
</head>
<body>

<h1>D&D Campaign Timeline</h1>
<div id="timeline-container">
  <div id="timeline"></div>
</div>

<script>
  const timeline = document.getElementById('timeline');
  const container = document.getElementById('timeline-container');

  // Load events from text file
  fetch('events.txt')
    .then(response => response.text())
    .then(text => {
      const lines = text.trim().split('\n');
      const events = lines.map(line => {
        const [date, title, description] = line.split('|');
        return { date, title, description };
      });

      events.sort((a, b) => a.date.localeCompare(b.date)); // Optional

      for (const event of events) {
        const div = document.createElement('div');
        div.className = 'event';
        div.dataset.date = event.date;
        div.innerHTML = `<h3>${event.title}</h3><p>${event.description}</p>`;
        timeline.appendChild(div);
      }
    });

  // Drag to scroll
  let isDown = false;
  let startX;
  let scrollX = 0;
  let scale = 1;

  container.addEventListener('mousedown', (e) => {
    isDown = true;
    startX = e.clientX;
    container.style.cursor = 'grabbing';
  });

  window.addEventListener('mouseup', () => {
    isDown = false;
    container.style.cursor = 'grab';
  });

  window.addEventListener('mousemove', (e) => {
    if (!isDown) return;
    const dx = e.clientX - startX;
    startX = e.clientX;
    scrollX += dx;
    updateTransform();
  });

  // Zoom with scroll wheel
  container.addEventListener('wheel', (e) => {
    if (e.ctrlKey) {
      e.preventDefault();
      const zoomIntensity = 0.1;
      scale += e.deltaY * -zoomIntensity / 100;
      scale = Math.min(Math.max(scale, 0.3), 3); // Clamp
      updateTransform();
    }
  }, { passive: false });

  function updateTransform() {
    timeline.style.transform = `translateX(${scrollX}px) scale(${scale})`;
  }
</script>

</body>
</html>
